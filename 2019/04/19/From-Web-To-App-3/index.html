<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <link rel="manifest" href="/img/favicons/manifest.json">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"weiw.io","root":"/","images":"/images","scheme":"Pisces","version":"8.1.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"disqus","storage":true,"lazyload":true,"nav":null,"activeClass":"disqus"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>
<meta name="description" content="FWTA is a project embraces the vision to create cross-platform mobile first applications using morden web technologies and best practices, such as Server Side Rendering (SSR), Progressive Web Applica">
<meta property="og:type" content="article">
<meta property="og:title" content="From Web to App 3">
<meta property="og:url" content="https://weiw.io/2019/04/19/From-Web-To-App-3/index.html">
<meta property="og:site_name" content="ShadowWalker&#39;s Blog">
<meta property="og:description" content="FWTA is a project embraces the vision to create cross-platform mobile first applications using morden web technologies and best practices, such as Server Side Rendering (SSR), Progressive Web Applica">
<meta property="og:locale">
<meta property="og:image" content="https://github.com/shadowwalker/weiw.io/blob/master/2019/04/19/From-Web-To-App-3/app-bottom.png?raw=true">
<meta property="og:image" content="https://github.com/shadowwalker/weiw.io/blob/master/2019/04/19/From-Web-To-App-3/screenshot.png?raw=true">
<meta property="article:published_time" content="2019-04-20T05:30:17.000Z">
<meta property="article:modified_time" content="2020-07-03T05:51:42.619Z">
<meta property="article:author" content="ShadowWalker">
<meta property="article:tag" content="JavaScript">
<meta property="article:tag" content="Web App">
<meta property="article:tag" content="PWA">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/shadowwalker/weiw.io/blob/master/2019/04/19/From-Web-To-App-3/app-bottom.png?raw=true">


<link rel="canonical" href="https://weiw.io/2019/04/19/From-Web-To-App-3/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-Hans'
  };
</script>
<title>From Web to App 3 | ShadowWalker's Blog</title>
  




  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="ShadowWalker's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">ShadowWalker's Blog</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">code, cook, reboot_</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Targets"><span class="nav-number">1.</span> <span class="nav-text">Targets</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UI-Frameworks-And-Resources"><span class="nav-number">2.</span> <span class="nav-text">UI Frameworks And Resources</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Material"><span class="nav-number">2.1.</span> <span class="nav-text">Material</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Fonts"><span class="nav-number">2.2.</span> <span class="nav-text">Fonts</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Icons"><span class="nav-number">2.3.</span> <span class="nav-text">Icons</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TypeScript-Setup"><span class="nav-number">3.</span> <span class="nav-text">TypeScript Setup</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UI"><span class="nav-number">4.</span> <span class="nav-text">UI</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Material-UI"><span class="nav-number">4.1.</span> <span class="nav-text">Material-UI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Head-Metas-And-Manifest"><span class="nav-number">4.2.</span> <span class="nav-text">Head Metas And Manifest</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Favicons-And-Other-Assets"><span class="nav-number">4.3.</span> <span class="nav-text">Favicons And Other Assets</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Nav-Bar"><span class="nav-number">4.4.</span> <span class="nav-text">Nav Bar</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Peformance"><span class="nav-number">5.</span> <span class="nav-text">Peformance</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Summary"><span class="nav-number">6.</span> <span class="nav-text">Summary</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Next"><span class="nav-number">7.</span> <span class="nav-text">Next</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">ShadowWalker</p>
  <div class="site-description" itemprop="description">ShadowWalker's Personal Blog</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">7</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/shadowwalker" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;shadowwalker" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:w@weiw.io" title="E-Mail → mailto:w@weiw.io"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.linkedin.com/in/weiwio/" title="LinkedIn → https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;weiwio&#x2F;" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://weiw.io/2019/04/19/From-Web-To-App-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ShadowWalker">
      <meta itemprop="description" content="ShadowWalker's Personal Blog">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ShadowWalker's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          From Web to App 3
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-04-19 22:30:17" itemprop="dateCreated datePublished" datetime="2019-04-19T22:30:17-07:00">2019-04-19</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">Edited on</span>
        <time title="Modified: 2020-07-02 22:51:42" itemprop="dateModified" datetime="2020-07-02T22:51:42-07:00">2020-07-02</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/FWTA/" itemprop="url" rel="index"><span itemprop="name">FWTA</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="Views">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">Views: </span>
      <span class="firestore-visitors-count"></span>
    </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2019/04/19/From-Web-To-App-3/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/04/19/From-Web-To-App-3/" itemprop="commentCount"></span>
    </a>
  </span>
  
  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <blockquote class="blockquote-center">
<p><strong><a href="https://weiw.io/2019/04/15/From-Web-To-App-1">FWTA</a></strong> is a project embraces the vision to create cross-platform mobile first applications using morden web technologies and best practices, such as <strong>Server Side Rendering (SSR), Progressive Web Application (PWA), Accelerated Mobile Pages (AMP), PRPL Pattern, Severless Backend</strong>.</p>

</blockquote>

<p><img src="https://github.com/shadowwalker/weiw.io/blob/master/2019/04/19/From-Web-To-App-3/app-bottom.png?raw=true"></p>
<p>This is one of the article series which records thoughts and notes during my implementation of <strong>FWTA</strong>.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/shadowwalker/FWTA">Github</a></li>
<li><a target="_blank" rel="noopener" href="https://fwta.weiw.io/">Demo</a></li>
</ul>
<p>In the previous article, I have deployed my dummy web app to firebase using its hosting and functions service. In this article, I would add some UI to make it more like an app rather than dummy web page.</p>
<a id="more"></a>

<h2 id="Targets"><a href="#Targets" class="headerlink" title="Targets"></a>Targets</h2><p>There are a lot of challenges to make a web app behave similar to native app, a few things to get started:</p>
<ul>
<li>Prevent user zoom in/out globally on the app<ul>
<li>Achievable by set <code>user-scalable=no</code> in viewport meta tag.</li>
</ul>
</li>
<li>Hide scroll bar but still able to scroll<ul>
<li><a target="_blank" rel="noopener" href="https://www.geeksforgeeks.org/hide-scroll-bar-but-while-still-being-able-to-scroll-using-css/">Here is a css solution</a></li>
</ul>
</li>
<li>Disable overscroll to refresh feature in Chrome in Android<ul>
<li>Achievable by css <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/CSS/overscroll-behavior">overscroll-behavior</a></li>
<li><a target="_blank" rel="noopener" href="https://developers.google.com/web/updates/2017/11/overscroll-behavior">Take control of your scroll: customizing pull-to-refresh and overflow effects</a></li>
</ul>
</li>
</ul>
<h2 id="UI-Frameworks-And-Resources"><a href="#UI-Frameworks-And-Resources" class="headerlink" title="UI Frameworks And Resources"></a>UI Frameworks And Resources</h2><blockquote>
<p>Disclaimer: I’m a non-designer.</p>
</blockquote>
<h3 id="Material"><a href="#Material" class="headerlink" title="Material"></a>Material</h3><p><a target="_blank" rel="noopener" href="https://material.io/">Material Design</a> is a design system – backed by open-source code – that helps teams build high-quality digital experiences faster. It is design language introduced by Google, I know a lot people don’t like it, but as a non-designer, this might be the best I could get. On the other hand, my experience is that the beatifulness is mostly depends on how people put basic elements into harmony rather than elements themselves. And that’s why we need designers. <a target="_blank" rel="noopener" href="https://material-ui.com/">Material-UI</a> is a implementation  of material design in react. Which has built components could be used easily.</p>
<h3 id="Fonts"><a href="#Fonts" class="headerlink" title="Fonts"></a>Fonts</h3><p>Font is another key point to style and beautify the app, it also has great impact on the performance. On web, a technique to use font family stack is often used to let client browser to adapt font automatically by fallbacking to the first font available. <a target="_blank" rel="noopener" href="https://bitsofco.de/the-new-system-font-stack/">The New System Font Stack</a> gives a good font stack which is performance oriented by using system font first:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line"><span class="attribute">font-family</span>: system-ui,</span><br><span class="line">             -apple-system,</span><br><span class="line">             BlinkMacSystemFont,</span><br><span class="line">             Microsoft YaHei,</span><br><span class="line">             Segoe UI,</span><br><span class="line">             Roboto,</span><br><span class="line">             Oxygen,</span><br><span class="line">             Ubuntu,</span><br><span class="line">             Cantarell,</span><br><span class="line">             Fira Sans,</span><br><span class="line">             Droid Sans,</span><br><span class="line">             Helvetica Neue,</span><br><span class="line">             sans-serif;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>A new <code>system-ui</code> is added to the top to simplify the usage of font from system, <a target="_blank" rel="noopener" href="https://caniuse.com/#search=system-ui">check availability</a>.</p>
</blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://fonts.google.com/">Google Fonts</a> - For CDN hosted free font resources.</li>
<li><a target="_blank" rel="noopener" href="https://fonts.google.com/?subset=chinese-simplified">Chinese Fonts</a> - For Noto font on google fonts.</li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/19911793">如何保证网页的字体在各平台都尽量显示为最高质量的黑体 - 知乎</a></li>
<li><a target="_blank" rel="noopener" href="http://zenozeng.github.io/fonts.css/">跨平台中文字体解决方案 - GitHub</a></li>
<li><a target="_blank" rel="noopener" href="https://ruby-china.org/topics/14005">Web 中文字体应用指南 - Ruby China</a></li>
<li><a target="_blank" rel="noopener" href="https://www.websiteplanet.com/blog/best-free-fonts/">Free Fonts For Commercial Use</a></li>
</ul>
<h3 id="Icons"><a href="#Icons" class="headerlink" title="Icons"></a>Icons</h3><p>Here is list of good icons resources.</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.iconfont.cn/">IconFont</a> - A large collection of icons from designers.</li>
<li><a target="_blank" rel="noopener" href="https://fontawesome.com/">FontAwesome</a> - A familiar old school pal.</li>
<li><a target="_blank" rel="noopener" href="https://material.io/tools/icons/?style=round">Material Design Icons</a></li>
<li><a target="_blank" rel="noopener" href="https://realfavicongenerator.net/">Real Favicon Generator</a> - For generating favicons, and other icons for PWA.</li>
<li><a target="_blank" rel="noopener" href="https://github.com/oblador/react-native-vector-icons">React Native Vector Icons</a> - This if for react native, but has a very good collection of icons.</li>
</ul>
<h2 id="TypeScript-Setup"><a href="#TypeScript-Setup" class="headerlink" title="TypeScript Setup"></a>TypeScript Setup</h2><p>TypeScript help to accelerate development by providing intellisense (hint) in VS Code, and detect silly bugs during development time which would otherwise break the app in runtime. Add Dependencies:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn add -D typescript @zeit/next-typescript</span><br><span class="line">yarn add -D @types/next @types/react @types/react-dom</span><br></pre></td></tr></table></figure>
<p>Add <a target="_blank" rel="noopener" href="https://github.com/shadowwalker/FWTA/blob/2efbdc383f74cecf0c8ab39fb756f17d3e8a70ea/src/app/tsconfig.json">tsconfig.json</a> and <a target="_blank" rel="noopener" href="https://github.com/shadowwalker/FWTA/blob/2efbdc383f74cecf0c8ab39fb756f17d3e8a70ea/src/app/.babelrc">.babelrc</a> to <code>src/app</code>, then update <a target="_blank" rel="noopener" href="https://github.com/shadowwalker/FWTA/blob/2efbdc383f74cecf0c8ab39fb756f17d3e8a70ea/src/app/next.config.js">next.config.js</a> to use typescript plugin. Change file name from <code>src/app/pages/index.js</code> to <code>src/app/pages/index.tsx</code>.</p>
<h2 id="UI"><a href="#UI" class="headerlink" title="UI"></a>UI</h2><h3 id="Material-UI"><a href="#Material-UI" class="headerlink" title="Material-UI"></a>Material-UI</h3><p>I implemented a material-ui plugin for next.js called <a target="_blank" rel="noopener" href="https://github.com/shadowwalker/next-mui">next-mui</a> for using material-ui with next.js SSR support. Add Dependencies:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add -D next-mui @material-ui/core@next @material-ui/styles@next @material-ui/icons@next</span><br></pre></td></tr></table></figure>
<p>Add <a target="_blank" rel="noopener" href="https://github.com/shadowwalker/FWTA/blob/0454d149abed839af109251390e6da6c6cfab921/src/app/pages/_app.tsx">_app.tsx</a> and <a target="_blank" rel="noopener" href="https://github.com/shadowwalker/FWTA/blob/0454d149abed839af109251390e6da6c6cfab921/src/app/pages/_document.tsx">_document.tsx</a> to <code>src/app/pages</code> as instructed in <code>next-mui</code>. </p>
<h3 id="Head-Metas-And-Manifest"><a href="#Head-Metas-And-Manifest" class="headerlink" title="Head Metas And Manifest"></a>Head Metas And Manifest</h3><p>There are bunch of things I put into head in <code>_document.tsx</code>, which should be pretty self explained. For PWA I’m going to implement later, the most important is <code>theme-color</code> and <code>manifest</code>, which defines where to find a <code>manifest.json</code> file. A good start point of those head info could be find at <a target="_blank" rel="noopener" href="https://github.com/Polymer/pwa-starter-kit/blob/master/index.html">PWA Start Kit - Polymer Project</a>.</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://developers.google.com/web/fundamentals/web-app-manifest/">The Web App Manifest - Google Developers</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/Manifest">Web App Manifest - MDN</a></p>
</blockquote>
<h3 id="Favicons-And-Other-Assets"><a href="#Favicons-And-Other-Assets" class="headerlink" title="Favicons And Other Assets"></a>Favicons And Other Assets</h3><p>Design an icon or logo could be the most easy or the most tough work. Once got the logo image, the most easy way to generated multiple size icons for web app is to use <a target="_blank" rel="noopener" href="https://realfavicongenerator.net/">Real Favicon Generator</a>.</p>
<p>Add correponding static icons and assets to <code>src/app/static</code> folder. </p>
<h3 id="Nav-Bar"><a href="#Nav-Bar" class="headerlink" title="Nav Bar"></a>Nav Bar</h3><p>I adapted the bottom nav bar from this <a target="_blank" rel="noopener" href="https://material-ui.com/demos/bottom-navigation/">demo on material-ui.com</a>.</p>
<p>Detailed implementation could be find on this <a target="_blank" rel="noopener" href="https://github.com/shadowwalker/FWTA/tree/edabf66117ce330e8d2c46a774bd9f5a89fa58c6">commit</a>. And the results looks like this. Great, this feels more like an App featuring a vertical srcoll view and a bottom navigation bar.</p>
<p><img src="https://github.com/shadowwalker/weiw.io/blob/master/2019/04/19/From-Web-To-App-3/screenshot.png?raw=true"></p>
<h2 id="Peformance"><a href="#Peformance" class="headerlink" title="Peformance"></a>Peformance</h2><p>File sizes</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">weiwio:FWTA weiw$ ls -ohSR dist/<span class="built_in">functions</span>/pages</span><br><span class="line">total 10656</span><br><span class="line">-rw-r--r--  1 weiw   887K Apr 20 21:42 index.js</span><br><span class="line">-rw-r--r--  1 weiw   886K Apr 20 21:42 explore.js</span><br><span class="line">-rw-r--r--  1 weiw   886K Apr 20 21:42 feed.js</span><br><span class="line">-rw-r--r--  1 weiw   886K Apr 20 21:42 new.js</span><br><span class="line">-rw-r--r--  1 weiw   886K Apr 20 21:42 me.js</span><br><span class="line">-rw-r--r--  1 weiw   886K Apr 20 21:42 _error.js</span><br><span class="line"></span><br><span class="line">weiwio:FWTA weiw$ ls -ohSR dist/public/_next/static</span><br><span class="line">total 0</span><br><span class="line">drwxr-xr-x  4 weiw   128B Apr 20 21:42 runtime</span><br><span class="line">drwxr-xr-x  3 weiw    96B Apr 20 21:42 XYQB7Jy2lKteqMICynujp</span><br><span class="line">drwxr-xr-x  3 weiw    96B Apr 20 21:42 chunks</span><br><span class="line"></span><br><span class="line">dist/public/_next/static/runtime:</span><br><span class="line">total 200</span><br><span class="line">-rw-r--r--  1 weiw    92K Apr 20 21:42 main-06c512ec64fb9631c29a.js</span><br><span class="line">-rw-r--r--  1 weiw   1.5K Apr 20 21:42 webpack-a79426b5e11f0ba5879d.js</span><br><span class="line"></span><br><span class="line">dist/public/_next/static/XYQB7Jy2lKteqMICynujp:</span><br><span class="line">total 0</span><br><span class="line">drwxr-xr-x  9 weiw   288B Apr 20 21:42 pages</span><br><span class="line"></span><br><span class="line">dist/public/_next/static/XYQB7Jy2lKteqMICynujp/pages:</span><br><span class="line">total 600</span><br><span class="line">-rw-r--r--  1 weiw   241K Apr 20 21:42 _app.js</span><br><span class="line">-rw-r--r--  1 weiw    36K Apr 20 21:42 _error.js</span><br><span class="line">-rw-r--r--  1 weiw   2.3K Apr 20 21:42 index.js</span><br><span class="line">-rw-r--r--  1 weiw   1.3K Apr 20 21:42 explore.js</span><br><span class="line">-rw-r--r--  1 weiw   1.3K Apr 20 21:42 feed.js</span><br><span class="line">-rw-r--r--  1 weiw   1.3K Apr 20 21:42 me.js</span><br><span class="line">-rw-r--r--  1 weiw   1.3K Apr 20 21:42 new.js</span><br><span class="line"></span><br><span class="line">dist/public/_next/static/chunks:</span><br><span class="line">total 224</span><br><span class="line">-rw-r--r--  1 weiw   110K Apr 20 21:42 commons.635a9eee6d171762a8dc.js</span><br></pre></td></tr></table></figure>
<p>Code start time (haven’t seen any problem with cold start)</p>
<p><a target="_blank" rel="noopener" href="https://github.com/shadowwalker/weiw.io/raw/master/2019/04/19/From-Web-To-App-3/Lighthouse%20Report.pdf">Lighthouse report</a></p>
<ul>
<li>Performance: 98 - Slightly decrease as we add more react code, but still good</li>
<li>Accessibility: 63 - Decrease due to disable zoom and hide scrollbar</li>
<li>Best Practices: 100</li>
<li>SEO: 100 - Increase due to meta informantion added to head</li>
</ul>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>To recap, I have added a bottom nav bar to the web app and fixed some issues in order to make the web app behave more like an native app. The snapshot commit could be found <a target="_blank" rel="noopener" href="https://github.com/shadowwalker/FWTA/tree/cb147803154915ea01d38eff688e33edac11e48a">here</a>.</p>
<h2 id="Next"><a href="#Next" class="headerlink" title="Next"></a>Next</h2><p>I will add PWA support, which makes the web app runs faster and works when offline.</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
              <a href="/tags/Web-App/" rel="tag"># Web App</a>
              <a href="/tags/PWA/" rel="tag"># PWA</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2019/04/17/From-Web-To-App-2/" rel="prev" title="From Web to App 2">
                  <i class="fa fa-chevron-left"></i> From Web to App 2
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2019/04/22/From-Web-To-App-4/" rel="next" title="From Web to App 4">
                  From Web to App 4 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2018 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ShadowWalker</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="/js/local-search.js"></script>






  

  <script src="//cdn.jsdelivr.net/npm/firebase@8.1.1/firebase-app.js"></script>
  <script src="//cdn.jsdelivr.net/npm/firebase@8.1.1/firebase-firestore.js"></script>
  <script>
    firebase.initializeApp({
      apiKey   : 'AIzaSyDVM8tdK8Cf59my17OyRAAXn9PbAWoPaxo',
      projectId: 'weiwio'
    });

    function getCount(doc, increaseCount) {
      // IncreaseCount will be false when not in article page
      return doc.get().then(d => {
        // Has no data, initialize count
        let count = d.exists ? d.data().count : 0;
        // If first view this article
        if (increaseCount) {
          // Increase count
          count++;
          doc.set({
            count
          });
        }
        return count;
      });
    }

    function appendCountTo(el) {
      return count => {
        el.innerText = count;
      };
    }
  </script>
  <script>
    (function() {
      const db = firebase.firestore();
      const articles = db.collection('articles');

      if (CONFIG.page.isPost) {
        // Fix issue #118
        // https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent
        const title = document.querySelector('.post-title').textContent.trim();
        const doc = articles.doc(title);
        let increaseCount = CONFIG.hostname === location.hostname;
        if (localStorage.getItem(title)) {
          increaseCount = false;
        } else {
          // Mark as visited
          localStorage.setItem(title, true);
        }
        getCount(doc, increaseCount).then(appendCountTo(document.querySelector('.firestore-visitors-count')));
      } else if (CONFIG.page.isHome) {
        const promises = [...document.querySelectorAll('.post-title')].map(element => {
          const title = element.textContent.trim();
          const doc = articles.doc(title);
          return getCount(doc);
        });
        Promise.all(promises).then(counts => {
          const metas = document.querySelectorAll('.firestore-visitors-count');
          counts.forEach((val, idx) => {
            appendCountTo(metas[idx])(val);
          });
        });
      }
    })();
  </script>




<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://weiwio.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://weiw.io/2019/04/19/From-Web-To-App-3/";
    this.page.identifier = "2019/04/19/From-Web-To-App-3/";
    this.page.title = "From Web to App 3";
    };
  NexT.utils.loadComments('#disqus_thread', () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://weiwio.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
